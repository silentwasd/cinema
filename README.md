# Film Manager

Этот проект представляет собой бэкенд для системы управления каталогом фильмов с дополнительной функциональностью для
пользовательских списков, отзывов, обработки видео и аудио, а также интеграцией встроенного плеера.

## Функциональные возможности

### 1. Каталог фильмов
Каждый фильм в системе содержит:
- **Название** — название фильма.
- **Обложку** — изображение для представления фильма.
- **Описание** — краткое содержание фильма.
- **Дата выхода** — год, месяц, день релиза.
- **Режиссеры и актеры** — список личностей, участвующих в создании фильма.

#### Добавление и редактирование фильмов
- Пользователи могут добавлять фильмы в общий каталог.
- Редактирование доступно только для фильмов, добавленных самим пользователем.
- Администратор может редактировать **любые** фильмы.

### 2. Пользовательские списки фильмов
Пользователи могут управлять своими личными списками фильмов:
- Добавлять фильмы из общего каталога в "Мои фильмы".
- Обновлять статус просмотра (например, "просмотрен").
- Оставлять отзывы:
    - Текстовые отзывы.
    - Оценки: "понравилось", "не понравилось", "трудно сказать".

### 3. Управление личностями
Система поддерживает отдельный справочник "людей":
- Личности могут быть как режиссерами, так и актерами.
- Один и тот же человек может быть одновременно режиссером и актером в одном фильме.

### 4. Права доступа
- **Пользователь**: добавляет и редактирует только свои фильмы.
- **Администратор**: может редактировать любые фильмы, добавленные в каталог.

### 5. Производство фильмов (доступно только администраторам)
Администраторы имеют доступ к разделу производства контента:
- **Загрузка фильмов**:
    - Скачивание по магнет-ссылке (торрент).
    - Выбор файлов или папок из скачанного контента.
- **Обработка видео и аудио**:
    - Настройка видео:
        - Разрешение (например, 1080p, 720p, 360p).
        - Ширина, высота.
        - Степень сжатия (CRF).
        - Битрейт.
    - Настройка аудио:
        - Битрейт.
        - Язык (отображается в списке аудиодорожек).
    - Добавление метаинформации:
        - Название (для видео — качество, для аудио — язык).
- **Публикация фильма**:
    - После обработки фильм становится доступным для просмотра пользователям.

### 6. Просмотр фильмов
Бэкенд дает сгенерированный HLS плейлист, который можно воспроизвести любым HLS плеером.

## Установка

### Требования

- PHP 8.2 (ext-xml, ext-zip, ext-curl, ext-mysql, ext-redis, ext-simplexml, ext-mbstring)
- MySQL 8.0
- Redis 7 (можно ниже, но надо тестить)
- Composer
- FFmpeg (для продакшна)
- Transmission Daemon (для продакшна)

### Порядок установки

1. Склонируйте репозиторий: `git clone https://github.com/silentwasd/film-manager.git`
2. Установите пакеты: `composer install`
3. Скопируйте `.env.example` как `.env` и пропишите необходимые параметры
4. Выполните команду: `php artisan key:generate`
5. Запустите миграции: `php artisan migrate`
6. Готово!

### Кодек для производства

По умолчанию кодек для кодирования видео - libx264. Он исполняется на процессоре.
Чем больше доступно ядер, тем быстрее будет выполняться кодирование видео.
Если на сервере есть GPU с CUDA ядрами, можно попробовать поменять на h264_nvenc.
Так как аудио кодируется в AAC, ускорение видеокартой на звук не повлияет.
